{"ast":null,"code":"var _jsxFileName = \"/home/nishanth/projects/livekit-demo/src/component/SendMessage.tsx\",\n  _s = $RefreshSig$();\nimport { CarouselLayout, ControlBar, DisconnectButton, ParticipantTile, RoomAudioRenderer, useRoomContext, useTracks } from \"@livekit/components-react\";\nimport { RoomEvent, Track } from \"livekit-client\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SendMessage() {\n  _s();\n  const room = useRoomContext();\n  const [audioMuted, setAudioMuted] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(false);\n  const tracks = useTracks([{\n    source: Track.Source.Camera,\n    withPlaceholder: true\n  }, {\n    source: Track.Source.ScreenShare,\n    withPlaceholder: false\n  }], {\n    onlySubscribed: false\n  });\n  const handleDataReceived = useCallback((payload, participant, kind, topic) => {\n    const decoder = new TextDecoder();\n    const message = decoder.decode(payload);\n    console.info(\"Message received:\", message, \"from\", participant === null || participant === void 0 ? void 0 : participant.identity);\n  }, [room]);\n  useEffect(() => {\n    room.on(RoomEvent.DataReceived, handleDataReceived);\n    return () => {\n      room.off(RoomEvent.DataReceived, handleDataReceived);\n    };\n  }, [handleDataReceived, room]);\n  const handleMuteAudio = () => {\n    const localParticipant = room.localParticipant;\n    if (audioMuted) {\n      localParticipant.setMicrophoneEnabled(true);\n    } else {\n      localParticipant.setMicrophoneEnabled(false);\n    }\n    setAudioMuted(!audioMuted);\n  };\n  const handleMuteVideo = () => {\n    const localParticipant = room.localParticipant;\n    if (videoMuted) {\n      localParticipant.setCameraEnabled(true);\n    } else {\n      localParticipant.setCameraEnabled(false);\n    }\n    setVideoMuted(!videoMuted);\n  };\n  const handleDisconnect = () => {\n    room.disconnect();\n  };\n  return room && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lk-control-bar\",\n      children: [/*#__PURE__*/_jsxDEV(ControlBar, {\n        variation: \"verbose\",\n        controls: {\n          screenShare: false,\n          leave: false\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleMuteAudio,\n        children: audioMuted ? \"Unmute Audio\" : \"Mute Audio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleMuteVideo,\n        children: videoMuted ? \"Unmute Video\" : \"Mute Video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(DisconnectButton, {\n        stopTracks: true,\n        onClick: handleDisconnect,\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          fill: \"none\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            fill: \"currentColor\",\n            fillRule: \"evenodd\",\n            d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n            clipRule: \"evenodd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            fill: \"currentColor\",\n            fillRule: \"evenodd\",\n            d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n            clipRule: \"evenodd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), \"Leave\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CarouselLayout, {\n      tracks: tracks,\n      style: {\n        height: \"calc(100vh - var(--lk-control-bar-height))\"\n      },\n      children: /*#__PURE__*/_jsxDEV(ParticipantTile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(RoomAudioRenderer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 7\n  }, this);\n}\n_s(SendMessage, \"tv/3HekzHFCpkojYf3y/e2prZaw=\", false, function () {\n  return [useRoomContext, useTracks];\n});\n_c = SendMessage;\nvar _c;\n$RefreshReg$(_c, \"SendMessage\");","map":{"version":3,"names":["CarouselLayout","ControlBar","DisconnectButton","ParticipantTile","RoomAudioRenderer","useRoomContext","useTracks","RoomEvent","Track","React","useCallback","useEffect","useState","jsxDEV","_jsxDEV","SendMessage","_s","room","audioMuted","setAudioMuted","videoMuted","setVideoMuted","tracks","source","Source","Camera","withPlaceholder","ScreenShare","onlySubscribed","handleDataReceived","payload","participant","kind","topic","decoder","TextDecoder","message","decode","console","info","identity","on","DataReceived","off","handleMuteAudio","localParticipant","setMicrophoneEnabled","handleMuteVideo","setCameraEnabled","handleDisconnect","disconnect","children","className","variation","controls","screenShare","leave","fileName","_jsxFileName","lineNumber","columnNumber","onClick","stopTracks","xmlns","width","height","fill","fillRule","d","clipRule","style","_c","$RefreshReg$"],"sources":["/home/nishanth/projects/livekit-demo/src/component/SendMessage.tsx"],"sourcesContent":["import {\n  CarouselLayout,\n  ControlBar,\n  DisconnectButton,\n  ParticipantTile,\n  RoomAudioRenderer,\n  useRoomContext,\n  useTracks,\n} from \"@livekit/components-react\";\nimport {\n  DataPacket_Kind,\n  RemoteParticipant,\n  RoomEvent,\n  Track,\n} from \"livekit-client\";\nimport React, { useCallback, useEffect, useState } from \"react\";\n\nexport default function SendMessage() {\n  const room = useRoomContext();\n  const [audioMuted, setAudioMuted] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(false);\n\n  const tracks = useTracks(\n    [\n      { source: Track.Source.Camera, withPlaceholder: true },\n      { source: Track.Source.ScreenShare, withPlaceholder: false },\n    ],\n    { onlySubscribed: false }\n  );\n\n  const handleDataReceived = useCallback(\n    (\n      payload: Uint8Array,\n      participant?: RemoteParticipant,\n      kind?: DataPacket_Kind,\n      topic?: string\n    ) => {\n      const decoder = new TextDecoder();\n      const message = decoder.decode(payload);\n      console.info(\"Message received:\", message, \"from\", participant?.identity);\n    },\n    [room]\n  );\n\n  useEffect(() => {\n    room.on(RoomEvent.DataReceived, handleDataReceived);\n    return () => {\n      room.off(RoomEvent.DataReceived, handleDataReceived);\n    };\n  }, [handleDataReceived, room]);\n\n  const handleMuteAudio = () => {\n    const localParticipant = room.localParticipant;\n    if (audioMuted) {\n      localParticipant.setMicrophoneEnabled(true);\n    } else {\n      localParticipant.setMicrophoneEnabled(false);\n    }\n    setAudioMuted(!audioMuted);\n  };\n\n  const handleMuteVideo = () => {\n    const localParticipant = room.localParticipant;\n    if (videoMuted) {\n      localParticipant.setCameraEnabled(true);\n    } else {\n      localParticipant.setCameraEnabled(false);\n    }\n    setVideoMuted(!videoMuted);\n  };\n\n  const handleDisconnect = () => {\n    room.disconnect();\n  };\n\n  return (\n    room && (\n      <div>\n        <div className=\"lk-control-bar\">\n          <ControlBar\n            variation=\"verbose\"\n            controls={{ screenShare: false, leave: false }}\n          />\n          <button onClick={handleMuteAudio}>\n            {audioMuted ? \"Unmute Audio\" : \"Mute Audio\"}\n          </button>\n          <button onClick={handleMuteVideo}>\n            {videoMuted ? \"Unmute Video\" : \"Mute Video\"}\n          </button>\n          <DisconnectButton stopTracks={true} onClick={handleDisconnect}>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              fill=\"none\"\n            >\n              <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\"\n                clipRule=\"evenodd\"\n              ></path>\n              <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\"\n                clipRule=\"evenodd\"\n              ></path>\n            </svg>\n            Leave\n          </DisconnectButton>\n        </div>\n        <CarouselLayout\n          tracks={tracks}\n          style={{ height: \"calc(100vh - var(--lk-control-bar-height))\" }}\n        >\n          <ParticipantTile />\n        </CarouselLayout>\n        <RoomAudioRenderer />\n      </div>\n    )\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}