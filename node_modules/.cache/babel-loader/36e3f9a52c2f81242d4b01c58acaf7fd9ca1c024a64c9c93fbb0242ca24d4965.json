{"ast":null,"code":"var _jsxFileName = \"/home/nishanth/projects/livekit-demo/src/sendMessage.tsx\",\n  _s = $RefreshSig$();\nimport { CarouselLayout, ControlBar, DisconnectButton, ParticipantTile, RoomAudioRenderer, useRoomContext, useTracks } from \"@livekit/components-react\";\nimport { RoomEvent, Track } from \"livekit-client\";\nimport React, { useCallback, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SendMessage() {\n  _s();\n  const room = useRoomContext();\n  const tracks = useTracks([{\n    source: Track.Source.Camera,\n    withPlaceholder: true\n  }, {\n    source: Track.Source.ScreenShare,\n    withPlaceholder: false\n  }], {\n    onlySubscribed: false\n  });\n  console.log(room, \"roomroomroom\");\n  const handleDataReceived = useCallback((payload, participant, kind, topic) => {\n    const decoder = new TextDecoder();\n    // if (topic === 'Error') {\n    //   console.info('received error message:', decoder.decode(payload));\n    //   setError(decoder.decode(payload));\n    //   return;\n    // }\n    decoder.decode(payload);\n    console.info(decoder.decode(payload), 'decode, topic, kind, participant');\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [room]);\n  useEffect(() => {\n    room.on(RoomEvent.DataReceived, handleDataReceived);\n    return () => {\n      room.off(RoomEvent.DataReceived, handleDataReceived);\n    };\n  }, [handleDataReceived, room]);\n  return room && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lk-control-bar\",\n      children: [/*#__PURE__*/_jsxDEV(ControlBar, {\n        variation: \"verbose\",\n        controls: {\n          screenShare: false,\n          leave: false\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(DisconnectButton, {\n        stopTracks: true,\n        onClick: () => console.log(\"Leave\"),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          fill: \"none\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            fill: \"currentColor\",\n            \"fill-rule\": \"evenodd\",\n            d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n            \"clip-rule\": \"evenodd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            fill: \"currentColor\",\n            \"fill-rule\": \"evenodd\",\n            d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n            \"clip-rule\": \"evenodd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }, this), \" Leave\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CarouselLayout, {\n      tracks: tracks,\n      style: {\n        height: \"calc(100vh - var(--lk-control-bar-height))\"\n      },\n      children: /*#__PURE__*/_jsxDEV(ParticipantTile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(RoomAudioRenderer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 15\n  }, this);\n}\n_s(SendMessage, \"ATr9b6h7iGywWFLY4NGmRQk+CWs=\", false, function () {\n  return [useRoomContext, useTracks];\n});\n_c = SendMessage;\nvar _c;\n$RefreshReg$(_c, \"SendMessage\");","map":{"version":3,"names":["CarouselLayout","ControlBar","DisconnectButton","ParticipantTile","RoomAudioRenderer","useRoomContext","useTracks","RoomEvent","Track","React","useCallback","useEffect","jsxDEV","_jsxDEV","SendMessage","_s","room","tracks","source","Source","Camera","withPlaceholder","ScreenShare","onlySubscribed","console","log","handleDataReceived","payload","participant","kind","topic","decoder","TextDecoder","decode","info","on","DataReceived","off","children","className","variation","controls","screenShare","leave","fileName","_jsxFileName","lineNumber","columnNumber","stopTracks","onClick","xmlns","width","height","fill","d","style","_c","$RefreshReg$"],"sources":["/home/nishanth/projects/livekit-demo/src/sendMessage.tsx"],"sourcesContent":["import {\n    CarouselLayout,\n    ControlBar,\n    DisconnectButton,\n    ParticipantTile,\n    RoomAudioRenderer,\n    useRoomContext,\n    useTracks\n  } from \"@livekit/components-react\";\n  import { DataPacket_Kind, RemoteParticipant, RoomEvent, Track } from \"livekit-client\";\n  import React, { useCallback, useEffect } from \"react\";\n  \n  export default function SendMessage() {\n    const room = useRoomContext();\n  \n    const tracks = useTracks(\n      [\n        { source: Track.Source.Camera, withPlaceholder: true },\n        { source: Track.Source.ScreenShare, withPlaceholder: false },\n      ],\n      { onlySubscribed: false }\n    );\n    console.log(room, \"roomroomroom\");\n    const handleDataReceived = useCallback(\n      (\n        payload: Uint8Array,\n        participant?: RemoteParticipant,\n        kind?: DataPacket_Kind | undefined,\n        topic?: string | undefined\n      ) => {\n        const decoder = new TextDecoder();\n        // if (topic === 'Error') {\n        //   console.info('received error message:', decoder.decode(payload));\n        //   setError(decoder.decode(payload));\n        //   return;\n        // }\n         decoder.decode(payload);\n        console.info(\n          decoder.decode(payload),\n          'decode, topic, kind, participant'\n        );\n  \n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [room]\n    );\n  \n    useEffect(() => {\n      room.on(RoomEvent.DataReceived, handleDataReceived);\n      return () => {\n        room.off(RoomEvent.DataReceived, handleDataReceived);\n      };\n    }, [handleDataReceived, room]);\n    return (\n      room && <div>\n        <div className=\"lk-control-bar\">\n          <ControlBar variation=\"verbose\" controls={{screenShare: false, leave: false}} />\n          <DisconnectButton stopTracks={true} onClick={() => console.log(\"Leave\")}>\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                fill=\"none\"\n              >\n                <path\n                  fill=\"currentColor\"\n                  fill-rule=\"evenodd\"\n                  d=\"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\"\n                  clip-rule=\"evenodd\"\n                ></path>\n                <path\n                  fill=\"currentColor\"\n                  fill-rule=\"evenodd\"\n                  d=\"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\"\n                  clip-rule=\"evenodd\"\n                ></path>\n              </svg> Leave\n            </DisconnectButton>\n        </div>\n        <CarouselLayout\n          tracks={tracks}\n          style={{ height: \"calc(100vh - var(--lk-control-bar-height))\" }}\n        >\n          <ParticipantTile />\n        </CarouselLayout>\n        <RoomAudioRenderer />\n      </div>\n    );\n  }\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}